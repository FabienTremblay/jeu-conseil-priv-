version: 3

# --- AXES DE TENSION ----------------------------------------------------------
axes_tension:
  - id: pauvrete
    valeur_init: 3
    seuil_crise: 8
    poids: 1.0
  - id: insecurite
    valeur_init: 3
    seuil_crise: 8
    poids: 1.0
  - id: maladie
    valeur_init: 2
    seuil_crise: 8
    poids: 1.0

# --- ÉCONOMIE INITIALE --------------------------------------------------------
economie_initiale:
  taux_impot_part: 0.20
  taux_impot_ent:  0.18
  taux_redevances: 0.10
  taux_interet:    0.03
  base_part:       120000
  base_ent:        90000
  base_ressources: 40000
  depenses_postes:
    sante: 900
    securite: 700
    social:  600
  dette: 12000
  capacite_max: 3
  efficience: 1.0

# --- CONTRAINTES ET RÈGLE DE VOTE --------------------------------------------
regle_vote:
  type: majorite_simple

contraintes:
  budget_min_solde: -3
  capacite_admin_max: 3

# --- RÈGLES DE PIOCHE ---------------------------------------------------------
pioche:
  main_taille_init: 4     # cartes par joueur au départ
  cartes_par_tour: 2      # cartes piochées en début de tour
  main_max: 7             # taille max de la main
#  enforce_main: true   # ← en prod/parties réelles, mais pas pour les tests

# --- CARTES -------------------------------------------------------------------
cartes:
  # 1️⃣ Mesure classique : aide sociale
  - id: aide_aux_familles
    type: mesure
    copies: 3
    poids: 1.0
    tags: [social, realloc]
    effets:
      - type: tension_axis_delta
        params:
          axis: pauvrete
          delta: -1
      - type: depenses_poste_delta
        params:
          poste: social
          delta: { discrete: { values: [100,200,300], weights: [1,2,1] } }

  # 2️⃣ Mesure structurelle : budget sécurité
  - id: reduction_budget_securite
    type: mesure
    copies: 2
    poids: 0.8
    tags: [securite, structure]
    effets:
      - type: depenses_poste_delta
        params:
          poste: securite
          delta: -150
      - type: tension_axis_delta
        params:
          axis: insecurite
          delta: +1

  # 3️⃣ Procédure : scandale politique
  - id: scandale
    type: procedure
    copies: 1
    poids: 0.5
    effets:
      - type: emit_event
        params:
          kind: scandale
      - type: capital_politique_delta
        params:
          cible: auteur
          delta: -2

  # 4️⃣ Amendement : plafonnement des dépenses
  - id: cap_budget
    type: amendement
    copies: 2
    poids: 0.9
    effets:
      - type: emit_event
        params:
          kind: amendement
      - type: capital_politique_delta
        params:
          cible: collectif
          delta: +1

  - id: aide_aux_familles
    type: mesure
    copies: 3
    tags: [social, realloc]
    charge_admin: 2   # défaut: 1 si absent
    effets: [...]

# --- ÉVÉNEMENTS MONDIAUX ------------------------------------------------------
perturbateurs_tour:
  - id: hausse_prix_energie
    copies: 2
    poids: 1.0
    effets:
      - type: tension_axis_delta
        params: { axis: pauvrete, delta: +1 }
      - type: tension_axis_delta
        params: { axis: insecurite, delta: +1 }

  - id: crise_sanitaire
    copies: 1
    poids: 0.8
    effets:
      - type: tension_axis_delta
        params:
          axis: maladie
          delta: { uniform: [ +1, +3 ] }

  - id: remontee_economique
    copies: 1
    poids: 0.6
    effets:
      - type: tension_axis_delta
        params: { axis: pauvrete, delta: -1 }
      - type: tension_axis_delta
        params: { axis: insecurite, delta: -1 }
      - type: capital_politique_delta
        params: { cible: collectif, delta: +2 }

# dans ton skin (ex: demo_complet.yaml)
ponderations_dynamiques:
  events:
    - when: { axis: pauvrete, op: '>=', value: 5 }
      applies_to: { tags: ['social'] }   # ou ids: ['crise_sanitaire']
      factor: 1.5
    - when: { axis: maladie, op: '>=', value: 5 }
      applies_to: { ids: ['crise_sanitaire'] }
      factor: 2.0
  cartes:
    - when: { axis: insecurite, op: '>=', value: 6 }
      applies_to: { tags: ['securite'] }
      factor: 1.3

politique:
  sensibilite_axes: 1.0      # >1.0 = plus sévère ; <1.0 = plus indulgent
  capital_base: 100          # niveau de référence (avant pénalité des axes)
  capital_min: -100          # plancher
  seuil_fin_collectif: 0     # fin si capital_collectif <= ce seuil
  bonus_collectif: 5         # bonus si le cabinet se maintient
  malus_collectif: -10       # malus si renversement


